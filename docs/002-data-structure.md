# Jot Deck データ構造

## 1. データモデル

### 1.1 エンティティ関係

```
Deck (1) ─────< Column (n) ─────< Card (n)
                                    │
                                    └───< Tag (n:n)
```

### 1.2 各エンティティの属性

#### Deck
| 属性 | 説明 |
|:---|:---|
| **name** | Deck 名 |
| **sort_order** | カードのソート順設定 |

#### Column
| 属性 | 説明 |
|:---|:---|
| **name** | Column 名（表示用） |
| **position** | 表示順序 |

#### Card
| 属性 | 説明 |
|:---|:---|
| **content** | テキスト内容 |
| **score** | 重要度（favorite 数） |

#### Tag
| 属性 | 説明 |
|:---|:---|
| **name** | タグ名（`#` を除く） |

---

## 2. タグ抽出ルール

* パターン: `#` + 英数字・アンダースコア・日本語（ひらがな・カタカナ・漢字）
* 例: `#todo`, `#2024`, `#アイデア`, `#重要_メモ`

---

## 3. 論理削除と物理削除

### 3.1 削除フロー

1. **論理削除:** ユーザーが削除操作を行うと、データは非表示になるが保持される。
2. **復元:** ゴミ箱から復元可能。
3. **物理削除:** 論理削除から 30 日後に自動で完全削除。

### 3.2 Column 削除時の連動

* Column を削除すると、所属する Card も連動して論理削除される。
* Column を復元すると、連動削除された Card も復元される。
* Card 単体で削除された場合は Column 復元の影響を受けない。
